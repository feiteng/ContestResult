<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>415_pjequilibrium.py</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>415_pjequilibrium.py</CENTER></H3><HR>
<PRE>
<A NAME="0"></A><FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match23-1.html#0',3,'match23-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>class Solution:
    def countRestrictedPaths(self, n: int, edges: List[List[int]]) -&gt; int:
        mod = 10 **9 + 7
        g = defaultdict(list)
        for u, v, w in edges:
            g[u-1].append((v-1, w))
            g[v-1].append((u-1, w))
        dtl =</B></FONT> [float('inf') for _ in range(n)]
        dtl[n-1] = 0
        pq = [(0, n-1)]
        while pq:
<A NAME="1"></A>            dist, u = heappop(pq)
            for nei, w in g[u]:
                nd = dist + w
                <FONT color="#f63526"><A HREF="javascript:ZweiFrames('match23-1.html#1',3,'match23-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>if nd &lt; dtl[nei]:
                    dtl[nei]  = nd 
                    heappush(pq, (dtl[nei], nei))
        # print(dtl)
        # prone
        ng = defaultdict(list)
<A NAME="2"></A>        for</B></FONT> u, v, w in edges:
            u-=1
            v-=1
            <FONT color="#77bfc7"><A HREF="javascript:ZweiFrames('match23-1.html#2',3,'match23-top.html#2',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>if dtl[u] &gt; dtl[v]:
                ng[u].append(v)
            elif dtl[u] &lt; dtl[v]:
                ng[v].append(u)
        @cache
        def dfs(u):
            if u == n-1:
                return 1
            ans = 0
            for nei in ng[u]:
                ans += dfs(</B></FONT>nei)
            return ans % mod


        ans = dfs(0)
        dfs.cache_clear()
        return ans
</PRE>

</BODY>
</HTML>
