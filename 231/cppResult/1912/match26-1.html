<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>253_void_ojbk.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>253_void_ojbk.cpp</CENTER></H3><HR>
<PRE>
class Solution {
public:
    #define N 100010
    #define mod 1000000007
    int n;
    typedef long long ll;
    typedef pair&lt;int,int&gt; pii;
    vector&lt;pii&gt;G[N];
    ll dis[N];
    int vis[N];
    ll ans[N];
    void Dij(){
<A NAME="1"></A>        for(int i = 0;i &lt;= n;i++)dis[i] = 1e18;
        memset(vis,0,sizeof vis);
        priority_queue&lt;pii,vector&lt;pii&gt;,greater&lt;pii&gt; &gt;Q;
<FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match26-0.html#1',2,'match26-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>        Q.push({0,n}); dis[n] = 0;
        
        while(not Q.empty()){
            int u = Q.top().second;Q.pop();
            //cout &lt;&lt; &quot;u : &quot; &lt;&lt; u &lt;&lt; endl;
            if(vis[u])continue;
            vis[u] = 1;
            for(auto&amp; e : G[u]){
                int v = e.first, w = e.second;
                //cout &lt;&lt; u &lt;&lt; &quot; -- &gt; &quot; &lt;&lt; v &lt;&lt; &quot;  : &quot; &lt;&lt; w &lt;&lt; endl;
                if(dis[v] &gt; dis[u]){
                    ans[v] = (ans[v] + ans[u]) % mod;</B></FONT>
                }
                if(not vis[v] and dis[v] &gt; dis[u] + w){
                    dis[v] = dis[u] + w;
                    
                    Q.push({dis[v], v});
                }
            }
<A NAME="0"></A>        }
    }
    
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match26-0.html#0',2,'match26-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>    int countRestrictedPaths(int nn, vector&lt;vector&lt;int&gt;&gt;&amp; edges) {
        n = nn;
        for(auto &amp;e : edges){
            int u = e[0],v = e[1],w = e[2];
            G[u].push_back({v,w});
            G[v].push_back({u,w});
        }</B></FONT>
        ans[n] = 1;
        Dij();
        //for(int i = 1;i &lt;= n;i++)cout &lt;&lt; dis[i] &lt;&lt; endl;
        return ans[1];
    }
};
</PRE>
</BODY>
</HTML>
