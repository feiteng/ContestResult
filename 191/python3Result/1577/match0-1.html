<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>135_louiez.py</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>135_louiez.py</CENTER></H3><HR>
<PRE>
<A NAME="0"></A><FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#0',2,'match0-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>class Solution:
    def getProbability(self, balls: List[int]) -&gt; float:
        s = sum(balls)//2
        self.S = s
        self.cnt = 1
        while s&gt;1:
            self.cnt*=s
            s-=1
<A NAME="2"></A>        self.tot = self.pos = 0
        self.dfs([],[],0,0,balls,0)
        # print(self.pos,self.tot)
        return self.pos/self.</B></FONT><FONT color="#77bfc7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#2',2,'match0-top.html#2',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>tot
    
    def dfs(self, que1, que2, s1,s2, balls, i):
        if self.S in (s1,s2):
            if s1==self.S:
                que2 = self.other(que1,balls)
            else:
                que1 = self.other(que2,balls)
            cnt = self.count(que1) * self.count(que2)
            a = b = 0
            for v in que1:
                if v: a+=1
            for v in que2:
                if v: b+=1
            
            #print(que1,cnt)
            
            self.tot+=cnt
            if a==b: self.pos+=cnt
            return
        if i&gt;=len(balls):
            return
        for v in range(balls[i]+1):
            que1.append(v)
            que2.append(balls[i]-v)
            s1+=v
            s2+=balls[i]-v
            if max(s1,s2)&lt;=self.S:
                self.dfs(que1,que2,s1,s2,balls,i+1)
            que1.pop()
            que2.pop()
<A NAME="1"></A>            s1-=v
            s2-=balls[i</B></FONT>]-v
    
    <FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match0-0.html#1',2,'match0-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>def other(self, queue, balls):
        que2 = balls[:]
        for i,v in enumerate(queue):
            que2[i]-=v
        return que2
    
    def count(self, queue):
        cnt = self.cnt
        for s in queue:
            c = 1
            while s&gt;1:
                c*=s
                s-=1
            cnt = cnt//c
        return</B></FONT> cnt
        
</PRE>

</BODY>
</HTML>
