<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>319_godxpunk.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>319_godxpunk.java</CENTER></H3><HR>
<PRE>
class Solution {
    int dp[];
    HashSet&lt;Integer&gt; set;
    public int[] countSubgraphsForEachDiameter(int n, int[][] edges) {
<A NAME="2"></A>        ArrayList&lt;Integer&gt; list[]=new ArrayList[n];
        dp=new int[n-1];
        set=new HashSet&lt;&gt;();
        <FONT color="#77bfc7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match34-0.html#2',2,'match34-top.html#2',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>go(0,edges,n);
        return dp;
    }
    
    void go(int x, int[][] edges, int n){
        if</B></FONT>(x==n) {
            // for(int k: set){
            //     System.out.print(k+&quot; &quot;);
            // }
            // System.out.println();
            if(set.size()&gt;1) workOnThisTree(set,edges,n);
            return;
<A NAME="0"></A>        }
        set.add(x);
        go(x+1,edges,n);
        <FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match34-0.html#0',2,'match34-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>set.remove(x);
        go(x+1,edges,n);
    }
    
    void workOnThisTree(HashSet&lt;Integer&gt; set, int[][] edges, int n){ // set of vertices
        ArrayList&lt;Integer&gt; list[]=new ArrayList[n];</B></FONT>
        for(int i=0;i&lt;n;i++) list[i]=new ArrayList&lt;&gt;();
        int c=0;
        for(int i=0;i&lt;n-1;i++){
            int x=edges[i][0]-1;
            int y=edges[i][1]-1;
            if(set.contains(x) &amp;&amp; set.contains(y)){
                list[x].add(y);
                list[y].add(x);
                c++;
            }
        }
        if(c==set.size()-1){ //isConnectedTree
            int gg=maxDist(set,list,n);
            dp[gg-1]++;
<A NAME="3"></A>        }
    }
    
    <FONT color="#6cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match34-0.html#3',2,'match34-top.html#3',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>int end=-1;
    int maxDist=0;
    
    int maxDist(HashSet&lt;Integer&gt; set, ArrayList&lt;Integer&gt; list[], int n){
        end=0;
        m</B></FONT>axDist=0;
        for(int x: set) {
            if(list[x].size()==1) {
                dfs(x,-1,0, list);
                break;
            }
<A NAME="1"></A>        }
        dfs(end,-1,0, list);
        return maxDist;
    <FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match34-0.html#1',2,'match34-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}
    
    void dfs(int i, int parent, int dist, ArrayList&lt;Integer&gt; list[]){
        if(dist&gt;maxDist){
<A NAME="4"></A>            maxDist=dist;
            e</B></FONT>nd=i;
        }
        <FONT color="#151b8d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match34-0.html#4',2,'match34-top.html#4',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>for(int x: list[i]){
            if(x==parent) continue;
            dfs(x,i,dist+1,list);
        }
    }</B></FONT>
    
}
</PRE>

</BODY>
</HTML>
