<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>233_dSX0vBlvum.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>233_dSX0vBlvum.cpp</CENTER></H3><HR>
<PRE>
class Solution {
public:
	int dp[2][71][71];
	int op[3]={-1,0,1};
<A NAME="0"></A>    int cherryPickup(vector&lt;vector&lt;int&gt;&gt;&amp; grid) {
		
		int now=1,n=grid.size(),m=grid[0].size();
<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match21-1.html#0',3,'match21-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>		dp[0][0][m-1]=grid[0][0]+grid[0][m-1];
		int ans=dp[0][0][m-1];
		for( int i=1;i&lt;grid.size();i++ )
		{
			for( int j=0;j&lt;m &amp;&amp; j&lt;=i;j++ )
<A NAME="1"></A>			{
				for( int k=m-1;k&gt;=0 &amp;&amp; k&gt;=m-1-i;k-- )
				{</B></FONT>
<FONT color="#f63526"><A HREF="javascript:ZweiFrames('match21-1.html#1',3,'match21-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>					for( int l=0;l&lt;3;l++ )
					{
						for( int u=0;u&lt;3;u++ )
						{
							int pre1=j+op[l],pre2=k+op[u];
							if( pre1&lt;0 || pre1&gt;m || pre2&lt;0 || pre2&gt;m ) continue;
							int sum=grid[i][j]+grid[i][k];
							
							if( j==k ) sum-=grid[i][j];
							dp[now][j][k]=max(dp[now][j][k],dp[now^1][pre1][pre2]+sum);
							ans=max(ans,dp[now][j][k]);
//							if( i==1 &amp;&amp; j==0 &amp;&amp; k==1 )
//							{
//								cout&lt;&lt;dp[now][i][j]&lt;&lt;endl;
//							}
						}
					}
				}
			}</B></FONT>
		//	cout&lt;&lt;ans&lt;&lt;endl;
			now^=1;
		}
		return ans;
    }
};
</PRE>
</BODY>
</HTML>
