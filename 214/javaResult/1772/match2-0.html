<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>515_lsq921224.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>515_lsq921224.java</CENTER></H3><HR>
<PRE>
<A NAME="0"></A><FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match2-1.html#0',3,'match2-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>class Solution {
    static class BIT {
        int[] arr;
        
        public BIT(int n) {
            arr = new int[n + 1];
        }
        
        public void update(int idx, int val) {
            idx += 1;
            // update tree that includes indx in left subtree
            while (idx &lt; arr.length) {
                arr[idx] += val;
                idx += (idx &amp; -idx);
            }
        }
        
        public int query(int idx) {
            int res = 0;
            idx += 1;
            while (idx &gt; 0) {
                res += arr[idx];
                idx -= (idx &amp; -idx);
            }
            return res;
        }        
    }</B></FONT>
    
    int mod = (int) (1e9) + 7;
    
    public int createSortedArray(int[] instructions) {
        int n = instructions.length;
        BIT bit = new BIT(100000);
        int[] count = new int[100001];
<A NAME="1"></A>        int sum = 0;
        for (int i = 0; i &lt; n; i ++) {
            int curr = instructions[i];
            int less = <FONT color="#f63526"><A HREF="javascript:ZweiFrames('match2-1.html#1',3,'match2-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>bit.query(curr - 1);
            sum = (sum + Math.min(less, i - count[curr] - less)) % mod;
            bit.update(curr, 1);
            count[curr] ++;
        }
        return sum;
    }
}</B></FONT>
</PRE>

</BODY>
</HTML>
