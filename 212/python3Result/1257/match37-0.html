<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>91_ruiiiii.py</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>91_ruiiiii.py</CENTER></H3><HR>
<PRE>
class Solution:
    def matrixRankTransform(self, mat: List[List[int]]) -&gt; List[List[int]]:
<A NAME="0"></A>        
        m, n = len(mat), len(mat[0])
        
        di = defaultdict<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match37-1.html#0',3,'match37-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>(list)
        for i in range(m):
            for j in range(n):
                di[mat[i][j]].append((i, j))
        
        rmax = [(0</B></FONT>, -10 ** 9 - 1) for _ in range(m)]
        cmax = [(0, -10 ** 9 - 1) for _ in range(n)]
        ans = [[0] * n for _ in range(m)]
        
        for v in sorted(di.keys()):
            for _ in range(len(di[v])):
                update = False
                for i, j in di[v]:
                    rank = max(rmax[i][0] + (v &gt; rmax[i][1]), cmax[j][0] + (v &gt; cmax[j][1]))
                    if ans[i][j] &lt; rank:
                        ans[i][j] = rank
                        rmax[i] = (rank, v)
                        cmax[j] = (rank, v)
                        update = True
                if not update: break
            
        return ans        
</PRE>

</BODY>
</HTML>
