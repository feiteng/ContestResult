<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>43_foorest.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>43_foorest.cpp</CENTER></H3><HR>
<PRE>

typedef vector&lt;int&gt; VI;
typedef pair&lt;int, int&gt; PI;
typedef pair&lt;long long, int&gt; PL;
typedef vector&lt;PI&gt; VPI;

#define FOR(i,a,n) for (int i = (a); i &lt; (n); ++i)
#define FORE(i,a,n) for (int i = (a); i &lt;= (n); ++i)
#define FORD(i,a,b) for (int i = (a); i &gt;= (b); --i)
#define REP(i,n) FOR(i,0,n)
#define REPE(i,n) FORE(i,0,n)
#define LL long long
#define FIR(n) REP(i,n)
#define FJR(n) REP(j,n)
#define ALL(v) v.begin(), v.end()

#define FI FIR(n)
#define FJ FJR(n)
#define FR(i,a) FOR(i,a,n)
#define REPN(i) REP(i,n)

<A NAME="0"></A>#define GI(n) scanf(&quot;%d&quot;, &amp;n)
#define GI2(n,m) scanf(&quot;%d %d&quot;, &amp;n, &amp;m)

<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match21-1.html#0',3,'match21-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>int p[100500];

int find_comp(int t) {
	if (p[t] == t)
		return t;
	return p[t] = find_comp(p[t]);
}

void unite(int a, int b) {</B></FONT>
	a = find_comp(a);
	b = find_comp(b);
	if (a != b)
		p[a] = b;
}


class Solution {
public:
	vector&lt;bool&gt; distanceLimitedPathsExist(int n, vector&lt;vector&lt;int&gt;&gt; edgeList, vector&lt;vector&lt;int&gt;&gt; queries) {
		for (auto&amp; v : edgeList) swap(v[0], v[2]);
		for (int i = 0; i &lt; queries.size(); ++i) {
			auto&amp; v = queries[i];
			swap(v[0], v[2]);
			v.push_back(i);
		}
		
		sort(ALL(edgeList));
		sort(ALL(queries));

		FI p[i] = i;
<A NAME="1"></A>
		int ne = edgeList.size();
		int nq = queries.size();
<FONT color="#f63526"><A HREF="javascript:ZweiFrames('match21-1.html#1',3,'match21-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>		int pe = 0;

		vector&lt;bool&gt; res(nq);
		for (int q = 0; q &lt; nq; ++q) {
			int D = queries[q][0];
			while (pe &lt; ne &amp;&amp; edgeList[pe][0] &lt; D) {
				unite(edgeList[pe][1], edgeList[pe][2]);
				++pe;
			}

			res[queries[q][3]] = find_comp(queries[q][1]) == find_comp(queries[q][2]);
		}
		return res;
	}
};</B></FONT>
</PRE>
</BODY>
</HTML>
