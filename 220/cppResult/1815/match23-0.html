<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>32_agoodusername.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>32_agoodusername.cpp</CENTER></H3><HR>
<PRE>
class Solution {
public:
<A NAME="0"></A>    int f[100005];
    int find(int x) {
        if (f[x] == x) return x;
<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match23-1.html#0',3,'match23-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>        else return (f[x] = find(f[x]));
    }
    
    vector&lt;bool&gt; distanceLimitedPathsExist(int n, vector&lt;vector&lt;int&gt;&gt;&amp; E, vector&lt;vector&lt;int&gt;&gt;&amp; Q) {
<A NAME="1"></A>        int nQ = Q.size();
        for (int i = 0; i &lt; nQ; i++) {
            int x = Q[i][0], y=Q[i][1],l = Q[i][2];</B></FONT>
<FONT color="#f63526"><A HREF="javascript:ZweiFrames('match23-1.html#1',3,'match23-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>            Q[i][0] = l; Q[i][1] = x+1; Q[i][2] = y+1;
            Q[i].push_back(i);
        }
        int nE = E.size();
<A NAME="2"></A>        
        for (int i = 0 ; i &lt; nE; i++) {
            int x = E[i][0], y=E[i][1],l = E[i][2];</B></FONT>
<FONT color="#77bfc7"><A HREF="javascript:ZweiFrames('match23-1.html#2',3,'match23-top.html#2',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>            E[i][0] = l; E[i][1] = x+1; E[i][2] = y+1;
        }
        sort(E.begin(), E.end());
        
        sort(Q.begin(), Q.end());
        
        for (int i = 1; i &lt;= n; i++)
            f[i] = i;
        
        vector&lt;bool&gt; ans (nQ, false);
        int i = 0;
        for (int j = 0; j &lt; nQ; j++) {
            int L = Q[j][0];
            while (i &lt; nE &amp;&amp; E[i][0] &lt; L) {
                int x = E[i][1], y = E[i][2];</B></FONT>
                int dx = find(x);
                int dy = find(y);
                if (dx != dy) f[dy] = dx;
                i++;
            }
            
            int x = Q[j][1], y = Q[j][2];
            int dx = find(x);
            int dy = find(y);
            ans[Q[j][3]] = dx==dy;
        }
        return ans;
    }
};
</PRE>
</BODY>
</HTML>
