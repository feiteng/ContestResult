<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>198_mkcmkc.py</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>198_mkcmkc.py</CENTER></H3><HR>
<PRE>
<A NAME="0"></A><FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match22-1.html#0',3,'match22-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>class Solution:
    def modifyString(self, s: str) -&gt; str:
        chars = []
        streak = 0
        qInS = False
        for c in s:
            if c == &quot;?&quot;:
                qInS = True
                streak += 1
            elif streak &gt; 0:
                chars.append(streak)
                streak = 0
                chars.append(c)
            else:
                chars.append(c)
                
        if not qInS:
            return s
                
        if streak &gt; 0:
            chars.append(streak)
            
        if len(chars) == 1:
            output = []
            while len(output) &lt; len(s):
                output.append(&quot;a&quot;)
                output.append(&quot;b&quot;)
                
            if len(output) &gt; len(s):
                output.pop()
                
            return &quot;&quot;.join(output)
        
        if isinstance(chars[0], int):
            if chars[1] == &quot;a&quot; or chars[1] == &quot;b&quot;:
                buffer = [&quot;c&quot;, &quot;d&quot;]
            else:
                buffer = [&quot;a&quot;, &quot;b&quot;]
                
            temp = []
            i = 0
            while len(temp) &lt; chars[0]:
                temp.append(buffer[i])
                i += 1
                i %= 2
                
            chars[0] = &quot;&quot;.join(temp)
            
        if isinstance(chars[-1], int):
            if chars[-2] == &quot;a&quot; or chars[-2] == &quot;b&quot;:
                buffer = [&quot;c&quot;, &quot;d&quot;]
            else:
                buffer = [&quot;a&quot;, &quot;b&quot;]
                
            temp = []
            i = 0
            while len(temp) &lt; chars[-1]:
                temp.append(buffer[i])
                i += 1
                i %= 2
                
            chars[-1] = &quot;&quot;.join(temp)
            
        for j in range(1, len(chars) - 1):
            if isinstance(chars[j], int):
                buffer = set(&quot;abcd&quot;)
                buffer.discard(chars[j - 1])
                buffer.discard(chars[j + 1])
                buffer = list(buffer)[:2]
                
                temp = []
                i = 0
                while len(temp) &lt; chars[j]:
                    temp.append(buffer[i])
                    i += 1
                    i %= 2
                
                chars[j] = &quot;&quot;.join(temp)
                
        return &quot;&quot;.join(c</B></FONT>hars)
            
</PRE>

</BODY>
</HTML>
