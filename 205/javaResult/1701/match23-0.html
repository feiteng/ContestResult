<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>250_abhigyankole.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>250_abhigyankole.java</CENTER></H3><HR>
<PRE>
<A NAME="0"></A><FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match23-1.html#0',3,'match23-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>class Solution {
    ArrayList&lt;ArrayList&lt;Integer&gt;&gt; list1;
    ArrayList&lt;ArrayList&lt;Integer&gt;&gt; list2;
    ArrayList&lt;ArrayList&lt;Integer&gt;&gt; listC;
    int v1[];
    int v2[];
    int v[];
    int nc;
    public int maxNumEdgesToRemove(int n, int[][] edges) {
        list1=new ArrayList&lt;&gt;();
        list2=new ArrayList&lt;&gt;();
        listC=new ArrayList&lt;&gt;();
        v1=new int[n];
        v=new int[n];
        
        v2=new int[n];
        for(int i=0;i&lt;n;i++)
        {
            list2.add(new ArrayList&lt;&gt;());
            list1.add(new ArrayList&lt;&gt;());
            listC.add(new ArrayList&lt;&gt;());
        }
        for(int i=0;i&lt;edges.length;i++)
        {
            if(edges[i][0]==1)
            {
                list1.get(edges[i][1]-1).add(edges[i][2]-1);
                list1.get(edges[i][2]-1).add(edges[i][1]-1);
            }
            else if(edges[i][0]==2)
            {
                list2.get(edges[i][1]-1).add(edges[i][2]-1);
                list2.get(edges[i][2]-1).add(edges[i][1]-1);
            }
            else
            {
                listC.get(edges[i][1]-1).add(edges[i][2]-1);
                listC.get(edges[i][2]-1).add(edges[i][1]-1);
            }
        }
        dfs1(0);
        dfs2(0);
        for(int i=0;i&lt;n;i++)
        {
            if(v1[i]==0||v2[i]==0)
            {
                return -1;
            }
        }
        int ans=0;
        int comp=0;
        for(int i=0;i&lt;n;i++)
        {
            if(v[i]==0)
            {
                comp++;
                nc=0;
                dfs(i);
                ans+=(nc-1);
            }
        }
        int req=ans+2*(comp-1);
        return edges.length-req;
    }
    void dfs1(int node)
    {
        if(v1[node]==1)
            return;
        v1[node]=1;
        ArrayList&lt;Integer&gt; l1=list1.get(node);
        ArrayList&lt;Integer&gt; lc=listC.get(node);
        for(int i:l1)
        {
            dfs1(i);
        }
        for(int i:lc)
        {
            dfs1(i);
        }
    }
    void dfs2(int node)
    {
        if(v2[node]==1)
            return;
        v2[node]=1;
        ArrayList&lt;Integer&gt; l2=list2.get(node);
        ArrayList&lt;Integer&gt; lc=listC.get(node);
        for(int i:l2)
        {
            dfs2(i);
        }
        for(int i:lc)
        {
            dfs2(i);
        }
    }
    void dfs(int node)
    {
        if(v[node]==1)
            return;
        nc++;
        v[node]=1;
        ArrayList&lt;Integer&gt; lc=listC.get(node);
        for(int i:lc)
        {
            dfs(i);
        }
    }
}</B></FONT>
</PRE>

</BODY>
</HTML>
