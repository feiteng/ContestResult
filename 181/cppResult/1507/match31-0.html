<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>518_Killmattboy.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>518_Killmattboy.cpp</CENTER></H3><HR>
<PRE>
class Solution {
private:
<A NAME="0"></A>    bool cell(int lastX, int lastY, int nowX, int nowY, int m, int n, vector&lt;vector&lt;int&gt;&gt;&amp; grid){
        if(nowX &lt; 0 || nowX &gt;= m || nowY &lt; 0 || nowY &gt;= n) return false;
        if(nowX == m - 1 &amp;&amp; nowY == n - 1){
<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match31-1.html#0',3,'match31-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>            switch(grid[nowX][nowY]){
                case 1:
                    if(lastY == nowY - 1 &amp;&amp; lastX == nowX) return true;
                    else if(lastY == nowY + 1 &amp;&amp; lastX == nowX) return true;
                    else return false;
                case 2:
                    if(lastY == nowY &amp;&amp; lastX == nowX - 1) return true;
                    else if(lastY == nowY &amp;&amp; lastX == nowX + 1) return true;
                    else return false;
                case 3:
                    if(lastY == nowY - 1 &amp;&amp; lastX == nowX) return true;
                    else if(lastY == nowY &amp;&amp; lastX == nowX + 1) return true;
                    else return false;
                case 4:
                    if(lastY == nowY + 1 &amp;&amp; lastX == nowX) return true;
                    else if(lastY == nowY &amp;&amp; lastX == nowX + 1) return true;
                    else return false;
                case 5:
                    if(lastY == nowY - 1 &amp;&amp; lastX == nowX) return true;
                    else if(lastY == nowY &amp;&amp; lastX == nowX - 1) return true;
                    else return false;</B></FONT>
                case 6:
                    if(lastY == nowY + 1 &amp;&amp; lastX == nowX) return true;
                    else if(lastY == nowY &amp;&amp; lastX == nowX - 1) return true;
                    else return false;
                default:
                    return false;
            }
        }
        switch(grid[nowX][nowY]){
            case 1:
                if(lastY == nowY - 1 &amp;&amp; lastX == nowX) return cell(nowX, nowY, nowX, nowY + 1, m, n, grid);
                else if(lastY == nowY + 1 &amp;&amp; lastX == nowX) return cell(nowX, nowY, nowX, nowY - 1, m, n, grid);
                else return false;
            case 2:
                if(lastY == nowY &amp;&amp; lastX == nowX - 1) return cell(nowX, nowY, nowX + 1, nowY, m, n, grid);
                else if(lastY == nowY &amp;&amp; lastX == nowX + 1) return cell(nowX, nowY, nowX - 1, nowY, m, n, grid);
                else return false;
            case 3:
                if(lastY == nowY - 1 &amp;&amp; lastX == nowX) return cell(nowX, nowY, nowX + 1, nowY, m, n, grid);
                else if(lastY == nowY &amp;&amp; lastX == nowX + 1) return cell(nowX, nowY, nowX, nowY - 1, m, n, grid);
                else return false;
            case 4:
                if(lastY == nowY + 1 &amp;&amp; lastX == nowX) return cell(nowX, nowY, nowX + 1, nowY, m, n, grid);
                else if(lastY == nowY &amp;&amp; lastX == nowX + 1) return cell(nowX, nowY, nowX, nowY + 1, m, n, grid);
                else return false;
            case 5:
                if(lastY == nowY - 1 &amp;&amp; lastX == nowX) return cell(nowX, nowY, nowX - 1, nowY, m, n, grid);
                else if(lastY == nowY &amp;&amp; lastX == nowX - 1) return cell(nowX, nowY, nowX, nowY - 1, m, n, grid);
                else return false;
            case 6:
                if(lastY == nowY + 1 &amp;&amp; lastX == nowX) return cell(nowX, nowY, nowX - 1, nowY, m, n, grid);
                else if(lastY == nowY &amp;&amp; lastX == nowX - 1) return cell(nowX, nowY, nowX, nowY + 1, m, n, grid);
                else return false;
            default:
                return false;
        }
        return false;
    }
public:
    bool hasValidPath(vector&lt;vector&lt;int&gt;&gt;&amp; grid) {
        int m = grid.size(), n = grid[0].size();
        if(m == 1 &amp;&amp; n == 1) return true;
        int lastX = 0, lastY = 0;
        if(grid[0][0] == 1 || grid[0][0] == 6) return cell(0, 0, 0, 1, m, n, grid);
        else if(grid[0][0] == 2 || grid[0][0] == 3) return cell(0, 0, 1, 0, m, n, grid);
        else if(grid[0][0] == 4) return cell(0, 0, 0, 1, m, n, grid) || cell(0, 0, 1, 0, m, n, grid);
        else return false;
    }
};
</PRE>
</BODY>
</HTML>
